!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r){for(var n=0;n<r.length;n++){var o=r[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var r=function(){function e(t,r){var n=t.data,o=t.handleCardClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._title=n.name,this._link=n.link,this._cardSelector=r,this._isLiked=n.isLiked,this.handleCardClick=o}var r,n;return r=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".picture-card").cloneNode(!0)}},{key:"createCard",value:function(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".picture-card__image").src=this._link,this._element.querySelector(".picture-card__image").alt="".concat(this._title," image"),this._element.querySelector(".picture-card__description").textContent=this._title,this._element}},{key:"_setEventListeners",value:function(){var e=this,t=this._element.querySelector(".picture-card__delete-btn");t.addEventListener("click",(function(){t.parentElement.remove()}));var r=this._element.querySelector(".picture-card__like-btn");r.addEventListener("click",(function(){return r.classList.toggle("picture-card__like-btn_active"),e._like()})),this._element.querySelector(".picture-card__image").addEventListener("click",(function(){e.handleCardClick(e._title,e._link)}))}},{key:"_like",value:function(){this._isLiked=!this._isLiked}}])&&t(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),e}();function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l(n.key),n)}}function i(e,t,r){return(t=l(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===n(t)?t:String(t)}var u=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i(this,"_checkInputValidity",(function(e,t){t.validity.valid?n._hideInputError(t):n._showInputError(e,t,t.validationMessage)})),i(this,"_hasInvalidInput",(function(e){return e.some((function(e){return!e.validity.valid}))})),i(this,"_toggleButtonState",(function(e){n._hasInvalidInput(e)?n._buttonElement.classList.add(n._inactiveButtonClass):n._buttonElement.classList.remove(n._inactiveButtonClass)})),i(this,"_showInputError",(function(e,t,r){n._errorElement=e.querySelector(".".concat(t.id,"-error")),n._errorElement.classList.add(n._inputErrorClass),n._errorElement.textContent=r})),i(this,"_hideInputError",(function(){n._errorElement&&(n._errorElement.classList.remove(n._inputErrorClass),n._errorElement.textContent="")})),this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorClass=t.inputErrorClass,this.formSelect=r}var t,r;return t=e,(r=[{key:"enableValidation",value:function(){var e=this;this._formElement=document.querySelector(this._formSelector);var t=Array.from(this._formElement.querySelectorAll(".modal__input-field"));t.forEach((function(r){r.addEventListener("input",(function(){e._checkInputValidity(e._formElement,r),e._toggleButtonState(t,e._submitButtonSelector)}))})),this._buttonElement=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(t,this._submitButtonSelector)}}])&&o(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),c={formSelector:".form",inputSelector:".modal__input-field",submitButtonSelector:".modal__submit-btn",inactiveButtonClass:"modal__submit-btn_inactive",inputErrorClass:"modal__input-error_active"};function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}var f=function(){function e(t,r){var n=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._items=n,this._renderer=o,this._container=document.querySelector(r)}var t,r;return t=e,(r=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"renderer",value:function(){var e=this;this._items.forEach((function(t){e._renderer(t)}))}}])&&s(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function y(e,t,r){return(t=d(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===p(t)?t:String(t)}var b=function(){function e(t){var r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,"close",(function(){r._formElement.remove(),document.removeEventListener("click",r.handleClickOutClose),window.removeEventListener("keydown",r._handleEscClose),r._formElement.querySelector(".modal__close-btn").removeEventListener("click",r.close)})),y(this,"_handleEscClose",(function(e){"Escape"===e.key&&r.close()})),y(this,"handleClickOutClose",(function(e){e.target.classList.contains("overlay")&&r.close()})),this.popupSelector=document.querySelector(t)}var t,r;return t=e,(r=[{key:"_getFormTemplate",value:function(){var e=document.querySelector(this.popupSelector).content;return this._formElement=e.querySelector(this.popupSelector.replace("#",".")).cloneNode(!0),this._formElement}},{key:"open",value:function(){return this._formElement=this._getFormTemplate(),this.setEventListeners(),this._formElement.classList.add("overlay"),this._formElement}},{key:"setEventListeners",value:function(){window.addEventListener("keydown",this._handleEscClose),document.addEventListener("click",this.handleClickOutClose),this._formElement.querySelector(".modal__close-btn").addEventListener("click",this.close)}}])&&m(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===v(o)?o:String(o)),n)}var o}function _(){return _="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},_.apply(this,arguments)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(n);if(o){var r=g(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),i.call(this)}return t=l,(r=[{key:"_getPopupTemplate",value:function(){var e=document.querySelector("#popup").content;return this._formElement=e.querySelector(".popup-container").cloneNode(!0),this._formElement}},{key:"open",value:function(e,t){return this._formElement=this._getPopupTemplate(),this._formElement.querySelector(".popup__image").src=t,this._formElement.querySelector(".popup__image").alt="".concat(e," image"),this._formElement.querySelector(".popup__title").textContent=e,this._formElement.classList.add("overlay"),document.querySelector(".pictures-container").append(this._formElement)}},{key:"close",value:function(){_(g(l.prototype),"close",this).call(this)}},{key:"setEventListeners",value:function(){_(g(l.prototype),"setEventListeners",this).call(this)}}])&&h(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(b);function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===w(o)?o:String(o)),n)}var o}function P(){return P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:r):o.value}},P.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(l,e);var t,r,n,o,i=(n=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=O(n);if(o){var r=O(this).constructor;e=Reflect.construct(t,arguments,r)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(e,t){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(r=i.call(this)).popupSelector=e,r.handleFormSubmit=t,r}return t=l,(r=[{key:"_getFormTemplate",value:function(){var e=document.querySelector(this.popupSelector).content;return this._formElement=e.querySelector(this.popupSelector.replace("#",".")).cloneNode(!0),this._formElement}},{key:"open",value:function(){return P(O(l.prototype),"open",this).call(this),this._formElement=this._getFormTemplate(),this.setEventListeners(),this._formElement.classList.add("overlay"),this._formElement}},{key:"close",value:function(){P(O(l.prototype),"close",this).call(this)}},{key:"_getInputValues",value:function(){return this._link=this._formElement.querySelector("#card-url").value,this._name=this._formElement.querySelector("#card-name").value,this._cardData={name:this._name,link:this._link},this._cardData}},{key:"setEventListeners",value:function(){var e=this;P(O(l.prototype),"setEventListeners",this).call(this),this._formElement.addEventListener("submit",(function(t){t.preventDefault(),e.handleFormSubmit(t),e.close()}))}}])&&k(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),l}(b);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function L(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x(n.key),n)}}function T(e,t,r){return t&&L(e.prototype,t),r&&L(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function B(e,t,r){return(t=x(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e){var t=function(e,t){if("object"!==q(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!==q(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===q(t)?t:String(t)}var R=T((function e(t){var r=this,n=t.userName,o=t.userAbout;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),B(this,"getUserInfo",(function(){r._getProfileName=document.querySelector("#modal-profile").content.querySelector("#profile-name"),r._getProfileAbout=document.querySelector("#modal-profile").content.querySelector("#profile-description"),r._getProfileName.value=r.userName.textContent,r._getProfileAbout.value=r.userAbout.textContent})),B(this,"editProfile",(function(){r._getProfileName=document.querySelector("#profile-name").value,r._getProfileAbout=document.querySelector("#profile-description").value,r.userName.textContent=r._getProfileName,r.userAbout.textContent=r._getProfileAbout})),this.userName=document.querySelector(n),this.userAbout=document.querySelector(o)}));document.querySelector(".profile__add-card-button").addEventListener("click",(function(){N()})),document.querySelector(".profile__edit-button").addEventListener("click",(function(){A()}));var I=new f({items:[{name:"Vale de Yosemite",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lago Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Montanhas Carecas",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"},{name:"Parque Nacional da Vanoise ",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"}],renderer:function(e){var t=new r({data:e,handleCardClick:function(e,t){var r=new E("#popup");r.open(e,t),r.setEventListeners()}},".card").createCard();I.addItem(t)}},".pictures-container");I.renderer();var N=function(){var e=new C("#modal-card",(function(t){t.preventDefault();var n=e._getInputValues(),o=new r({data:n,handleCardClick:function(e,t){var r=new E("#popup");r.open(e,t),r.setEventListeners()}},".card"),i=document.querySelector(".pictures-container"),l=o.createCard();i.prepend(l)}));if(null===document.querySelector(".form")){var t=document.querySelector(".pictures-container"),n=e.open();t.append(n)}new u(c,"#modal-card").enableValidation()},A=function(){var e=new C("#modal-profile",(function(e){e.preventDefault(),t.editProfile()})),t=new R({userName:".profile__name",userAbout:".profile__about-me"});if(t.getUserInfo(),null===document.querySelector(".form")){var r=document.querySelector(".pictures-container"),n=e.open();r.append(n)}new u(c,"#modal-profile").enableValidation()}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QWMsa0JBQWtCLFNBQUNqQixHQUNuREEsRUFBSXFCLGlCQUNKd0IsRUFBU0MsYUFDWCxJQUVNRCxFQUFXLElBQUl2QixFQUFTLENBQzVCRSxTQUFVLGlCQUNWQyxVQUFXLHVCQUtiLEdBRkFvQixFQUFTRSxjQUUrQixPQUFwQ3hILFNBQVNDLGNBQWMsU0FBbUIsQ0FDNUMsSUFBTWtILEVBQWdCbkgsU0FBU0MsY0FBYyx1QkFDdkNtSCxFQUFpQlAsRUFBUUgsT0FDL0JTLEVBQWNuRCxPQUFPb0QsRUFDdkIsQ0FDQSxJQUFJaEcsRUFBY0MsRUFBVyxrQkFBa0JnRyxrQkFDakQsQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy91dGlscy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X3B0YnIvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfcHRici8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9wdGJyLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3Rvcih7IGRhdGEsIGhhbmRsZUNhcmRDbGljayB9LCBjYXJkU2VsZWN0b3IpIHtcbiAgICB0aGlzLl90aXRsZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjtcbiAgICB0aGlzLl9pc0xpa2VkID0gZGF0YS5pc0xpa2VkO1xuICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICB9XG5cbiAgLyogIFJlY29saGUgZSBjbG9uYSBvIHRlbXBsYXRlIGRvIGNhcmQqL1xuXG4gIF9nZXRUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBjYXJkRWxlbWVudCA9IGRvY3VtZW50XG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLnBpY3R1cmUtY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcbiAgfVxuXG4gIC8qICBBdHJpYnVpIG9zIHZhbG9yZXMgcGFyYSBhdHJpYnV0b3MgZG8gZWxlbWVudG8gZSBjcmlhIG8gY2FyZCAqL1xuXG4gIGNyZWF0ZUNhcmQoKSB7XG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBpY3R1cmUtY2FyZF9faW1hZ2VcIikuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5waWN0dXJlLWNhcmRfX2ltYWdlXCJcbiAgICApLmFsdCA9IGAke3RoaXMuX3RpdGxlfSBpbWFnZWA7XG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnBpY3R1cmUtY2FyZF9fZGVzY3JpcHRpb25cIikudGV4dENvbnRlbnQgPVxuICAgICAgdGhpcy5fdGl0bGU7XG5cbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcbiAgfVxuXG4gIC8qICBBZGljaW9uYSBvcyBFdmVudExpc3RlbmVycyBub3MgY2FyZHMgICovXG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIGNvbnN0IGRlbGV0ZUJ0biA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5waWN0dXJlLWNhcmRfX2RlbGV0ZS1idG5cIik7XG4gICAgZGVsZXRlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBkZWxldGVCdG4ucGFyZW50RWxlbWVudC5yZW1vdmUoKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGxpa2VCdG4gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGljdHVyZS1jYXJkX19saWtlLWJ0blwiKTtcbiAgICBsaWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBsaWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoXCJwaWN0dXJlLWNhcmRfX2xpa2UtYnRuX2FjdGl2ZVwiKTtcbiAgICAgIHJldHVybiB0aGlzLl9saWtlKCk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBjYXJkSW1hZ2UgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGljdHVyZS1jYXJkX19pbWFnZVwiKTtcbiAgICBjYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuaGFuZGxlQ2FyZENsaWNrKHRoaXMuX3RpdGxlLCB0aGlzLl9saW5rKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9saWtlKCkge1xuICAgIHRoaXMuX2lzTGlrZWQgPSAhdGhpcy5faXNMaWtlZDtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XG4gIGNvbnN0cnVjdG9yKGNvbmZpZ09iaiwgZm9ybVNlbGVjdCkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZ09iai5mb3JtU2VsZWN0b3I7IC8qIFwiLmZvcm1cIiAqL1xuICAgIHRoaXMuX2lucHV0U2VsZWN0b3IgPSBjb25maWdPYmouaW5wdXRTZWxlY3RvcjsgLyogXCIubW9kYWxfX2lucHV0LWZpZWxkXCIgKi9cbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9XG4gICAgICBjb25maWdPYmouc3VibWl0QnV0dG9uU2VsZWN0b3I7IC8qIFwiLm1vZGFsX19zdWJtaXQtYnRuIFwiKi9cbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID1cbiAgICAgIGNvbmZpZ09iai5pbmFjdGl2ZUJ1dHRvbkNsYXNzOyAvKiBcIi5tb2RhbF9fc3VibWl0LWJ0bl9pbmFjdGl2ZVwiICAqL1xuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9XG4gICAgICBjb25maWdPYmouaW5wdXRFcnJvckNsYXNzOyAvKiBcIi5tb2RhbF9faW5wdXQtZXJyb3JfYWN0aXZlXCIgKi9cblxuICAgIHRoaXMuZm9ybVNlbGVjdCA9IGZvcm1TZWxlY3Q7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9mb3JtU2VsZWN0b3IpO1xuXG4gICAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0LWZpZWxkXCIpXG4gICAgKTtcblxuICAgIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkodGhpcy5fZm9ybUVsZW1lbnQsIGlucHV0RWxlbWVudCk7XG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9idXR0b25FbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yXG4gICAgKTtcblxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xuICB9XG4gIC8qLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAgVmFsaWRhw6fDtWVzICAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tKi9cblxuICAvKiAgQXByZXNlbnRhIG91IGVzY29uZGUgb3MgZWxlbWVudG9zIGRlIGVycm8gY2FzbyBvIGlucHV0IGZvciBpbnbDoWxpZG8gKi9cblxuICBfY2hlY2tJbnB1dFZhbGlkaXR5ID0gKF9mb3JtRWxlbWVudCwgaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKFxuICAgICAgICBfZm9ybUVsZW1lbnQsXG4gICAgICAgIGlucHV0RWxlbWVudCxcbiAgICAgICAgaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xuICAgIH1cbiAgfTtcblxuICAvKiAgVmFsaWRhIHNlIG9zIGNhbXBvcyBwb3NzdWVtIHVtIGlucHV0IGludsOhbGlkbyAqL1xuXG4gIF9oYXNJbnZhbGlkSW5wdXQgPSAoaW5wdXRMaXN0KSA9PiB7XG4gICAgcmV0dXJuIGlucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+ICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpO1xuICB9O1xuXG4gIC8qICBBbHRlcmEgbyBlc3RhZG8gZG8gYm90w6NvIGRlIHN1Ym1pdCBkZXBlbmRlbmRvIGRvIHJldG9ybm8gZGEgdmFsaWRhw6fDo28gKi9cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUgPSAoaW5wdXRMaXN0KSA9PiB7XG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB9XG4gIH07XG5cbiAgLyogIEFwcmVzZW50YSBvIGVsZW1lbnRvIGRlIGVycm8gZG9zIGlucHV0cyByZXRvcm5hZG8gcGVsYSB2YWxpZGHDp8OjbyAgKi9cblxuICBfc2hvd0lucHV0RXJyb3IgPSAoX2Zvcm1FbGVtZW50LCBpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkgPT4ge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IF9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXG4gICAgKTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcbiAgfTtcblxuICAvKiAgRXNjb25kZSBvIGVsZW1lbnRvIGRlIGVycm8gZG9zIGlucHV0cyByZXRvcm5hZG8gcGVsYSB2YWxpZGHDp8OjbyAgKi9cblxuICBfaGlkZUlucHV0RXJyb3IgPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuX2Vycm9yRWxlbWVudCkge1xuICAgICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XG4gICAgfVxuICB9O1xufVxuIiwiZXhwb3J0IHsgY29uZmlnT2JqIH07XG5cbmV4cG9ydCBjb25zdCBjYXJkQ29udGFpbmVyID0gXCIucGljdHVyZXMtY29udGFpbmVyXCI7XG5leHBvcnQgY29uc3QgY2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIlZhbGUgZGUgWW9zZW1pdGVcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL3lvc2VtaXRlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIExvdWlzZVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIk1vbnRhbmhhcyBDYXJlY2FzXCIsXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9iYWxkLW1vdW50YWlucy5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGF0ZW1hclwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGF0ZW1hci5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFnbyBkaSBCcmFpZXNcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhZ28uanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlBhcnF1ZSBOYWNpb25hbCBkYSBWYW5vaXNlIFwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvdmFub2lzZS5qcGdcIixcbiAgfSxcbl07XG5cbmNvbnN0IGNvbmZpZ09iaiA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsXG4gIGlucHV0U2VsZWN0b3I6IFwiLm1vZGFsX19pbnB1dC1maWVsZFwiLFxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX3N1Ym1pdC1idG5cIixcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogXCJtb2RhbF9fc3VibWl0LWJ0bl9pbmFjdGl2ZVwiLFxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0LWVycm9yX2FjdGl2ZVwiLFxufTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gIH1cblxuICBhZGRJdGVtKGVsZW1lbnQpIHtcbiAgICB0aGlzLl9jb250YWluZXIuYXBwZW5kKGVsZW1lbnQpO1xuICB9XG5cbiAgcmVuZGVyZXIoKSB7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHRoaXMucG9wdXBTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gIH1cblxuICBfZ2V0Rm9ybVRlbXBsYXRlKCkge1xuICAgIGNvbnN0IGZvcm1UZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5wb3B1cFNlbGVjdG9yKS5jb250ZW50O1xuXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtVGVtcGxhdGVcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMucG9wdXBTZWxlY3Rvci5yZXBsYWNlKFwiI1wiLCBcIi5cIikpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1FbGVtZW50O1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX2dldEZvcm1UZW1wbGF0ZSgpO1xuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtRWxlbWVudC5jbGFzc0xpc3QuYWRkKFwib3ZlcmxheVwiKTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtRWxlbWVudDtcbiAgfVxuXG4gIGNsb3NlID0gKCkgPT4ge1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnJlbW92ZSgpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLmhhbmRsZUNsaWNrT3V0Q2xvc2UpO1xuICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgY29uc3QgY2xvc2VCdG4gPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jbG9zZS1idG5cIik7XG4gICAgY2xvc2VCdG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuY2xvc2UpO1xuICB9O1xuXG4gIF9oYW5kbGVFc2NDbG9zZSA9IChldnQpID0+IHtcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIikge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH1cbiAgfTtcblxuICBoYW5kbGVDbGlja091dENsb3NlID0gKGV2dCkgPT4ge1xuICAgIGlmIChldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm92ZXJsYXlcIikpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH07XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5oYW5kbGVDbGlja091dENsb3NlKTtcbiAgICBjb25zdCBjbG9zZUJ0biA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Nsb3NlLWJ0blwiKTtcbiAgICBjbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5jbG9zZSk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIC8qICBSZWNvbGhlIGUgY2xvbmEgbyB0ZW1wbGF0ZSBkbyBwb3B1cCAqL1xuICBfZ2V0UG9wdXBUZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBwb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcG9wdXBcIikuY29udGVudDtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXAtY29udGFpbmVyXCIpLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtRWxlbWVudDtcbiAgfVxuXG4gIC8qICBBdHJpYnVpIG9zIHZhbG9yZXMgcGFyYSBhcyBtYXJjYcOnw7VlcyBkbyBwb3B1cCBlIGFkaWNpb25hIGFvIERPTSAqL1xuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IHRoaXMuX2dldFBvcHVwVGVtcGxhdGUoKTtcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2ltYWdlXCIpLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9faW1hZ2VcIikuYWx0ID0gYCR7bmFtZX0gaW1hZ2VgO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gbmFtZTtcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5XCIpO1xuXG4gICAgY29uc3QgY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGljdHVyZXMtY29udGFpbmVyXCIpO1xuXG4gICAgcmV0dXJuIGNhcmRDb250YWluZXIuYXBwZW5kKHRoaXMuX2Zvcm1FbGVtZW50KTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5wb3B1cFNlbGVjdG9yID0gcG9wdXBTZWxlY3RvcjtcbiAgICB0aGlzLmhhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xuICB9XG5cbiAgX2dldEZvcm1UZW1wbGF0ZSgpIHtcbiAgICBjb25zdCBmb3JtVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMucG9wdXBTZWxlY3RvcikuY29udGVudDtcblxuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gZm9ybVRlbXBsYXRlXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLnBvcHVwU2VsZWN0b3IucmVwbGFjZShcIiNcIiwgXCIuXCIpKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcblxuICAgIHJldHVybiB0aGlzLl9mb3JtRWxlbWVudDtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgc3VwZXIub3BlbigpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50ID0gdGhpcy5fZ2V0Rm9ybVRlbXBsYXRlKCk7XG4gICAgdGhpcy5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm1FbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJvdmVybGF5XCIpO1xuXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1FbGVtZW50O1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9saW5rID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLXVybFwiKS52YWx1ZTtcbiAgICB0aGlzLl9uYW1lID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcIiNjYXJkLW5hbWVcIikudmFsdWU7XG5cbiAgICB0aGlzLl9jYXJkRGF0YSA9IHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUsXG4gICAgICBsaW5rOiB0aGlzLl9saW5rLFxuICAgIH07XG5cbiAgICByZXR1cm4gdGhpcy5fY2FyZERhdGE7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgIHRoaXMuaGFuZGxlRm9ybVN1Ym1pdChldnQpO1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJBYm91dCB9KSB7XG4gICAgdGhpcy51c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWUpO1xuICAgIHRoaXMudXNlckFib3V0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VyQWJvdXQpO1xuICB9XG5cbiAgLyogQ29sZXRhIG9zIGRhZG9zIGRvIHBlcmZpbCAqL1xuXG4gIGdldFVzZXJJbmZvID0gKCkgPT4ge1xuICAgIHRoaXMuX2dldFByb2ZpbGVOYW1lID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXByb2ZpbGVcIilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lXCIpO1xuXG4gICAgdGhpcy5fZ2V0UHJvZmlsZUFib3V0ID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLXByb2ZpbGVcIilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1kZXNjcmlwdGlvblwiKTtcblxuICAgIHRoaXMuX2dldFByb2ZpbGVOYW1lLnZhbHVlID0gdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudDtcbiAgICB0aGlzLl9nZXRQcm9maWxlQWJvdXQudmFsdWUgPSB0aGlzLnVzZXJBYm91dC50ZXh0Q29udGVudDtcbiAgfTtcblxuICAvKiBFZGl0YSBvcyBkYWRvcyBkbyBwZXJmaWwgKi9cblxuICBlZGl0UHJvZmlsZSA9ICgpID0+IHtcbiAgICB0aGlzLl9nZXRQcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS1uYW1lXCIpLnZhbHVlO1xuICAgIHRoaXMuX2dldFByb2ZpbGVBYm91dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIiNwcm9maWxlLWRlc2NyaXB0aW9uXCJcbiAgICApLnZhbHVlO1xuXG4gICAgdGhpcy51c2VyTmFtZS50ZXh0Q29udGVudCA9IHRoaXMuX2dldFByb2ZpbGVOYW1lO1xuICAgIHRoaXMudXNlckFib3V0LnRleHRDb250ZW50ID0gdGhpcy5fZ2V0UHJvZmlsZUFib3V0O1xuICB9O1xufVxuIiwiaW1wb3J0IFwiLi9zdHlsZXMvaW5kZXguY3NzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi9jb21wb25lbnRzL0NhcmQuanNcIjtcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gXCIuL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IHsgY29uZmlnT2JqIH0gZnJvbSBcIi4vY29tcG9uZW50cy91dGlscy5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgeyBjYXJkcywgY2FyZENvbnRhaW5lciB9IGZyb20gXCIuL2NvbXBvbmVudHMvdXRpbHMuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbi8qICBBZGljaW9uYW5kbyBFdmVudExpc3RlbmVycyBhb3MgYm90w7VlcyBkZSBhZGljaW9uYXIgZSBlZGl0YXIgcGVyZmlsICAqL1xuXG4oZnVuY3Rpb24gKCkge1xuICBjb25zdCBhZGRDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtY2FyZC1idXR0b25cIik7XG4gIGFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICByZW5kZXJDYXJkRm9ybSgpO1xuICB9KTtcblxuICBjb25zdCBlZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG4gIGVkaXRQcm9maWxlLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgcmVuZGVyUHJvZmlsZUZvcm0oKTtcbiAgfSk7XG59KSgpO1xuXG4vKiAgSW5zZXJpbmRvIGNhcmRzIGV4aXN0ZW50ZXMgYW8gRE9NICovXG5cbmNvbnN0IGNhcmRMaXN0ID0gbmV3IFNlY3Rpb24oXG4gIHtcbiAgICBpdGVtczogY2FyZHMsXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjYXJkID0gbmV3IENhcmQoXG4gICAgICAgIHtcbiAgICAgICAgICBkYXRhOiBpdGVtLFxuICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKG5hbWUsIGxpbmspID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHBvcHVwSW1nID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI3BvcHVwXCIpO1xuICAgICAgICAgICAgcG9wdXBJbWcub3BlbihuYW1lLCBsaW5rKTtcbiAgICAgICAgICAgIHBvcHVwSW1nLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgXCIuY2FyZFwiXG4gICAgICApO1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNyZWF0ZUNhcmQoKTtcbiAgICAgIGNhcmRMaXN0LmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xuICAgIH0sXG4gIH0sXG4gIGNhcmRDb250YWluZXJcbik7XG5jYXJkTGlzdC5yZW5kZXJlcigpO1xuXG4vKiAgQWJyaW5kbyBmb3JtdWzDoXJpbyBkZSBjYXJkICovXG5cbmV4cG9ydCBjb25zdCByZW5kZXJDYXJkRm9ybSA9ICgpID0+IHtcbiAgY29uc3QgbmV3Rm9ybSA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI21vZGFsLWNhcmRcIiwgKGV2dCkgPT4ge1xuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGNhcmREYXRhID0gbmV3Rm9ybS5fZ2V0SW5wdXRWYWx1ZXMoKTtcbiAgICBjb25zdCBuZXdDYXJkID0gbmV3IENhcmQoXG4gICAgICB7XG4gICAgICAgIGRhdGE6IGNhcmREYXRhLFxuICAgICAgICBoYW5kbGVDYXJkQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XG4gICAgICAgICAgY29uc3QgcG9wdXBJbWcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjcG9wdXBcIik7XG4gICAgICAgICAgcG9wdXBJbWcub3BlbihuYW1lLCBsaW5rKTtcbiAgICAgICAgICBwb3B1cEltZy5zZXRFdmVudExpc3RlbmVycygpO1xuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIFwiLmNhcmRcIlxuICAgICk7XG4gICAgY29uc3QgY2FyZENvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucGljdHVyZXMtY29udGFpbmVyXCIpO1xuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gbmV3Q2FyZC5jcmVhdGVDYXJkKCk7XG4gICAgY2FyZENvbnRhaW5lci5wcmVwZW5kKGNhcmRFbGVtZW50KTtcbiAgfSk7XG5cbiAgaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybVwiKSA9PT0gbnVsbCkge1xuICAgIGNvbnN0IG1haW5Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBpY3R1cmVzLWNvbnRhaW5lclwiKTtcbiAgICBjb25zdCBuZXdGb3JtRWxlbWVudCA9IG5ld0Zvcm0ub3BlbigpO1xuICAgIG1haW5Db250YWluZXIuYXBwZW5kKG5ld0Zvcm1FbGVtZW50KTtcbiAgfVxuXG4gIG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ09iaiwgXCIjbW9kYWwtY2FyZFwiKS5lbmFibGVWYWxpZGF0aW9uKCk7XG59O1xuXG4vKiAgQWJyaW5kbyBmb3JtdWzDoXJpbyBkZSBwZXJmaWwgKi9cblxuZXhwb3J0IGNvbnN0IHJlbmRlclByb2ZpbGVGb3JtID0gKCkgPT4ge1xuICBjb25zdCBuZXdGb3JtID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtcHJvZmlsZVwiLCAoZXZ0KSA9PiB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgdXNlckluZm8uZWRpdFByb2ZpbGUoKTtcbiAgfSk7XG5cbiAgY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xuICAgIHVzZXJOYW1lOiBcIi5wcm9maWxlX19uYW1lXCIsXG4gICAgdXNlckFib3V0OiBcIi5wcm9maWxlX19hYm91dC1tZVwiLFxuICB9KTtcblxuICB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuXG4gIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm1cIikgPT09IG51bGwpIHtcbiAgICBjb25zdCBtYWluQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5waWN0dXJlcy1jb250YWluZXJcIik7XG4gICAgY29uc3QgbmV3Rm9ybUVsZW1lbnQgPSBuZXdGb3JtLm9wZW4oKTtcbiAgICBtYWluQ29udGFpbmVyLmFwcGVuZChuZXdGb3JtRWxlbWVudCk7XG4gIH1cbiAgbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnT2JqLCBcIiNtb2RhbC1wcm9maWxlXCIpLmVuYWJsZVZhbGlkYXRpb24oKTtcbn07XG4iXSwibmFtZXMiOlsiQ2FyZCIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJkYXRhIiwiaGFuZGxlQ2FyZENsaWNrIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl90aXRsZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfY2FyZFNlbGVjdG9yIiwiX2lzTGlrZWQiLCJpc0xpa2VkIiwia2V5IiwidmFsdWUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJzcmMiLCJhbHQiLCJjb25jYXQiLCJ0ZXh0Q29udGVudCIsIl90aGlzIiwiZGVsZXRlQnRuIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhcmVudEVsZW1lbnQiLCJyZW1vdmUiLCJsaWtlQnRuIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2xpa2UiLCJGb3JtVmFsaWRhdG9yIiwiY29uZmlnT2JqIiwiZm9ybVNlbGVjdCIsIl9kZWZpbmVQcm9wZXJ0eSIsIl9mb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImlucHV0TGlzdCIsInNvbWUiLCJfaGFzSW52YWxpZElucHV0IiwiX2J1dHRvbkVsZW1lbnQiLCJhZGQiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImVycm9yTWVzc2FnZSIsIl9lcnJvckVsZW1lbnQiLCJpZCIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX3RoaXMyIiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiU2VjdGlvbiIsImNsYXNzU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImVsZW1lbnQiLCJhcHBlbmQiLCJpdGVtIiwiUG9wdXAiLCJwb3B1cFNlbGVjdG9yIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImhhbmRsZUNsaWNrT3V0Q2xvc2UiLCJ3aW5kb3ciLCJfaGFuZGxlRXNjQ2xvc2UiLCJjbG9zZSIsImV2dCIsInRhcmdldCIsImNvbnRhaW5zIiwiZm9ybVRlbXBsYXRlIiwicmVwbGFjZSIsIl9nZXRGb3JtVGVtcGxhdGUiLCJzZXRFdmVudExpc3RlbmVycyIsIlBvcHVwV2l0aEltYWdlIiwiX1BvcHVwIiwiX2luaGVyaXRzIiwiX3N1cGVyIiwiY2FsbCIsInBvcHVwIiwiX2dldFBvcHVwVGVtcGxhdGUiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiUG9wdXBXaXRoRm9ybSIsImhhbmRsZUZvcm1TdWJtaXQiLCJfbmFtZSIsIl9jYXJkRGF0YSIsInByZXZlbnREZWZhdWx0IiwiVXNlckluZm8iLCJfY3JlYXRlQ2xhc3MiLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsIl9nZXRQcm9maWxlTmFtZSIsIl9nZXRQcm9maWxlQWJvdXQiLCJyZW5kZXJDYXJkRm9ybSIsInJlbmRlclByb2ZpbGVGb3JtIiwiY2FyZExpc3QiLCJjYXJkRWxlbWVudCIsInBvcHVwSW1nIiwib3BlbiIsImNyZWF0ZUNhcmQiLCJhZGRJdGVtIiwibmV3Rm9ybSIsImNhcmREYXRhIiwiX2dldElucHV0VmFsdWVzIiwibmV3Q2FyZCIsImNhcmRDb250YWluZXIiLCJwcmVwZW5kIiwibWFpbkNvbnRhaW5lciIsIm5ld0Zvcm1FbGVtZW50IiwiZW5hYmxlVmFsaWRhdGlvbiIsInVzZXJJbmZvIiwiZWRpdFByb2ZpbGUiLCJnZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=